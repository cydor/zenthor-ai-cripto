#.github/workflows/docker-build.yml
name: Docker CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  docker-build:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ”„ KÃ³d checkout
      uses: actions/checkout@v4

    - name: ğŸ Python kÃ¶rnyezet beÃ¡llÃ­tÃ¡sa (ha kell pip cache-hez)
      uses: actions/setup-python@v5
      with:
        python-version: '3.13'

    - name: ğŸ§  Pip cache
      uses: actions/cache@v4
      with:
        path: ~/.cache/pip
        key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}
        restore-keys: |
          ${{ runner.os }}-pip-

    - name: ğŸ³ Docker Build (dev kÃ¶rnyezet)
      run: |
        docker build --build-arg ENV=dev -t zenthor-ai-cripto .

    # OpciÃ³: futtathatsz benne teszteket is (ha van pl. test_runner.py)
    # - name: âœ… Tesztek futtatÃ¡sa
    #   run: docker run zenthor-ai-cripto python -m unittest discover

    # DockerHub push: csak akkor, ha privÃ¡t vagy Ã©les image-et tÃ¶ltenÃ©l
    # - name: ğŸ“¤ Docker push (opcionÃ¡lis)
    #   run: |
    #     echo "${{ secrets.DOCKERHUB_PASSWORD }}" | docker login -u "${{ secrets.DOCKERHUB_USERNAME }}" --password-stdin
    #     docker tag zenthor-ai-cripto your-dockerhub-user/zenthor-ai-cripto:latest
    #     docker push your-dockerhub-user/zenthor-ai-cripto:latest
